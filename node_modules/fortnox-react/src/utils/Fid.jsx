import devdebug from './DevDebug';

const FID_ERROR = '[FID] No fid present in url. Fid needs to be part of the app url like so: http://domain/appname/<fid>/view/*';

const isValidFid = fid => (fid !== undefined && fid.length === 32);

const getFid = (pathname) => {
	// During a transition period both position A and B can contain the fid,
	// depending on wether there is a language present in the url or not.
	const [, , posA, posB] = (pathname || window.location.pathname).split('/');
	const fid = isValidFid(posA) && posA || isValidFid(posB) && posB;
	if (!isValidFid(fid)) {
		devdebug(FID_ERROR);
		return null;
	}
	return fid;
};

export { isValidFid, getFid };
