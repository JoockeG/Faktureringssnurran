import React from 'react';
import { t as gettext } from 'c-3po';
import TextBox from './TextBox';
import { hasInvalidLength, isValidGLN } from '../validations/GLN';

/**
 * The React FormFieldGLN component.
 * This component is used to validate Global Location Number
 *
 *
 * @class
 * @name FormFieldGLN
 *
 * @return {FormFieldGLN} An instance of the FormFieldGLN component.
 */
class FieldGLN extends React.Component {

	/**
	 * @private
	 * @memberOf FormFieldGLN
	 *
	 * @description
	 *
	 * Check if the value is an email, returns an error message otherwise.
	 *
	 * @param {String} value
	 *
	 * @return {String|Boolean}
	 */
	validate(value) {
		if (hasInvalidLength(value)) {
			return gettext`GLN måste innehålla 13 siffror.`;
		}

		return isValidGLN(value) ? true : gettext`${value} är inte ett giltigt GLN.`;
	}

	render() {
		return (
			<TextBox
				{...this.props}
				validate={this.validate.bind(this)}
			/>
		);
	}

}


export default FieldGLN;
