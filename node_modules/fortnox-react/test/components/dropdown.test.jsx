import React from 'react';
import TestUtils from 'react-dom/test-utils';
import ajaxstub from 'utils/AjaxStub';

import DropDown from 'utils/DropDown';

describe('Dropdown', () => {

	it('renders a dropdown with a title and content', done => {
		const component = TestUtils.renderIntoDocument(
			<DropDown title="airplanes">
				<li>
					<a>
						<div className="menudown-content">
							<div>Airbus A320</div>
						</div>
					</a>
				</li>
			</DropDown>
		);
		const title = TestUtils.scryRenderedDOMComponentsWithClass(component, 'menudown-title');
		const btn = TestUtils.scryRenderedDOMComponentsWithClass(component, 'dropdown-btn');
		const menudownContent = TestUtils.scryRenderedDOMComponentsWithClass(component, 'menudown-content');
		title[0].textContent.should.equal('airplanes');
		menudownContent[0].textContent.should.equal('Airbus A320');

		TestUtils.scryRenderedDOMComponentsWithClass(component, 'dropdown-active').length.should.equal(0);
		TestUtils.Simulate.mouseDown(btn[0]);
		TestUtils.scryRenderedDOMComponentsWithClass(component, 'dropdown-active').length.should.equal(1);
		done();
	});


	it('should render an icon as button', done => {
		const component = TestUtils.renderIntoDocument(
			<DropDown icon="icon-cloud" />
		);
		const icons = TestUtils.scryRenderedDOMComponentsWithClass(component, 'icon-cloud');
		const title = TestUtils.scryRenderedDOMComponentsWithClass(component, 'menudown-title');
		icons[0].className.should.equal('icon-cloud');
		TestUtils.scryRenderedDOMComponentsWithClass(component, 'dropdown-active').length.should.equal(0);
		TestUtils.Simulate.mouseDown(title[0]);
		TestUtils.scryRenderedDOMComponentsWithClass(component, 'dropdown-active').length.should.equal(1);
		done();
	});
});
