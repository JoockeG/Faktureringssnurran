import React from 'react';
import TestUtils from 'react-dom/test-utils';
import Backbone from 'utils/BackboneAdapter';
import 'utils/AjaxStub'
import FieldPlusgiro from 'form/Plusgiro';

import testDataBinding from 'utils/TestDataBinding';

describe('Form FieldPlusgiro', () => {

	it('Should validate Plusgiro correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldPlusgiro model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');

		component.validate('415 85 02-7').should.be.true();
		component.validate('415 A85 02-7').should.equal('Plusgironummer innehåller ogiltiga tecken, endast 0-9 och - är tillåtna.');

		done();
	});

	it('should handle databinding correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldPlusgiro model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');
		testDataBinding(input, p, 'foo');
		done();
	});

});
