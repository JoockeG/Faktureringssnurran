import React from 'react';
import TestUtils from 'react-dom/test-utils';
import Backbone from 'utils/BackboneAdapter';
import 'utils/AjaxStub'
import FieldGLN from 'form/GLN';

import testDataBinding from 'utils/TestDataBinding';

describe('Form FieldGLN', () => {

	it('Should validate GLN correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldGLN model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');

		component.validate('7350053850019').should.be.true();
		component.validate('73500538500129').should.equal('GLN måste innehålla 13 siffror.');

		done();
	});

	it('should handle databinding correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldGLN model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');
		testDataBinding(input, p, 'foo');
		done();
	});

});
