import React from 'react';
import TestUtils from 'react-dom/test-utils';
import Backbone from 'utils/BackboneAdapter';
import 'utils/AjaxStub'
import FieldBankgiro from 'form/Bankgiro';

import testDataBinding from 'utils/TestDataBinding';

describe('Form FieldBankgiro', () => {

	it('Should validate Bankgiro correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldBankgiro model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');

		component.validate('5050-1055').should.be.true();
		component.validate('5050-10A55').should.equal('Bankgironummer innehåller ogiltiga tecken, endast 0-9 och - är tillåtna.');

		done();
	});

	it('should handle databinding correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldBankgiro model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');
		testDataBinding(input, p, 'foo');
		done();
	});

});
