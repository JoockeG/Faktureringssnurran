import React from 'react';
import 'should';
import { mount } from 'enzyme';
import Backbone from 'utils/BackboneAdapter';
import FieldNumeric from 'form/Numeric';


describe('FormField validateOnBlur', () => {
	it('Should not validate on blur', (done) => {
		const m = new Backbone.Model();
		const wrapper = mount(<FieldNumeric title="Numbers only" model={m} modelProp="price" validateOnBlur={false} />);
		const input = wrapper.update().find('input');
		input.getDOMNode().value = 'a';
		wrapper.update().find('input').simulate('change');
		wrapper.update().find('input').simulate('blur');
		wrapper.update().find('.hint--error').length.should.equal(0);
		done();
	});

	it('Should validate on blur by default', (done) => {
		const m = new Backbone.Model();
		const wrapper = mount(<FieldNumeric title="Numbers only" model={m} modelProp="price" />);
		const input = wrapper.update().find('input');
		input.getDOMNode().value = 'a';
		wrapper.update().find('input').simulate('change');
		wrapper.update().find('input').simulate('blur');
		wrapper.update().find('.hint--error').length.should.equal(1);
		done();
	});
});
