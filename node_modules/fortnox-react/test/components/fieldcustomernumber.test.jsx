import React from 'react';
import TestUtils from 'react-dom/test-utils';
import Backbone from 'utils/BackboneAdapter';
import 'utils/AjaxStub'

import FieldCustomerNumber from 'form/CustomerNumber';

import testDataBinding from 'utils/TestDataBinding';

describe('Form FieldCustomernumber', () => {

	it('Should validate CustomerNumber correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldCustomerNumber model={p} modelProp="foo" />
		);

		component.validate('7350053850019').should.be.true();
		component.validate('123').should.be.true();
		component.validate('123ABC').should.be.true();
		component.validate('99').should.be.true();
		component.validate('-77').should.be.true();
		component.validate('-11?').should.equal('Kundnummer innehåller ogiltiga tecken. Följande tecken är tillåtna: A-Ö, a-ö, 0-9 _/+-');

		done();
	});

	it('should handle databinding correctly', done => {
		const p = new Backbone.Model();
		const component = TestUtils.renderIntoDocument(
			<FieldCustomerNumber model={p} modelProp="foo" />
		);
		const input = TestUtils.findRenderedDOMComponentWithTag(component, 'input');
		testDataBinding(input, p, 'foo');
		done();
	});

});
