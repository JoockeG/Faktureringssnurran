import React from 'react';
import 'utils/AjaxStub';
import { mount, shallow } from 'enzyme';
import Button from 'form/Button';
import AccessClick from 'accessrights/Click';

describe('AccessClick', () => {
	it('Renders an AccessClick while preventing the clickthrough', (done) => {
		let isClicked = false;

		const mounted = mount(
			<AccessClick assert="bf.doodad">
				<Button onClick={() => { isClicked = true; }} />
			</AccessClick>
		);

		setTimeout(() => {
			mounted.update().find('button').simulate('click');
			isClicked.should.be.false();
			done();
		}, 0);
	});

	it('Renders an AccessClick while permitting the clickthrough', (done) => {
		let isClicked = false;

		const mounted = mount(
			<AccessClick assert="bf.altervoucher">
				<Button onClick={() => { isClicked = true; }} />
			</AccessClick>
		);


		setTimeout(() => {
			mounted.update().find('button').simulate('click');
			isClicked.should.be.true();
			done();
		}, 0);
	});
});
