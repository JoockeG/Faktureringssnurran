import React from 'react';
import ReactDOM from 'react-dom';
import TestUtils from 'react-dom/test-utils';
import 'utils/AjaxStub'
import FeatureSwitch from '../../src/featureswitch/FeatureSwitch';

describe('Featureswitch', () => {
	it('Should render when the feature is available', done => {
		const features = JSON.stringify(["test"]);
		const component = TestUtils.renderIntoDocument(
			<div>
				<FeatureSwitch feature="test" featuresStorage={features}>New feature X</FeatureSwitch>
			</div>
		);

		ReactDOM.findDOMNode(component).textContent.should.equal('New feature X');
		done();
	});

	it('Should not render when the feature is unavailable', done => {
		const features = JSON.stringify([]);
		const component = TestUtils.renderIntoDocument(
			<div>
				<FeatureSwitch feature="test" featuresStorage={features}>New feature X</FeatureSwitch>
			</div>
		);

		ReactDOM.findDOMNode(component).textContent.should.equal('');
		done();
	});
});
